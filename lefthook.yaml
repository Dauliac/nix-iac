skip_output:
  - meta
  - success
commit-msg:
  parallel: true
  commands:
    commitlint:
      skip:
        - merge
        - rebase
      tags: check lint commit
      run: cat "{1}" | convco check --from-stdin
    typos:
      skip:
        - merge
        - rebase
      tags: check commit typos
      run: cat "{1}" | head -n 1 | typos -
pre-commit:
  commands:
    formatter:
      tags: formatter
      run: nix fmt
      stage_fixed: true
    checks:
      tags: build checks
      run: nix flake check --quiet
    trivy:
      tags: checks
      run: |
        nix run '.#oci-cve-app-minimalistWithTrivyIgnoreAndExtra'
        nix run '.#oci-cve-app-minimalistWithTrivyIgnore'
